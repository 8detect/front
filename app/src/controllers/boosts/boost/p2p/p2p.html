<div class="mdl-card__supporting-text mdl-color-text--red" [hidden]="!error">
  {{error}}
</div>

<div class="mdl-card__supporting-text" [hidden]="!notEnoughPoints">
  Do you want to buy more points?
  <a class="mdl-button mdl-button--raised mdl-button--colored" [routerLink]="['/Wallet']">Buy more points!</a>
</div>

<!--<minds-payments-checkout></minds-payments-checkout>-->

<!--CONTENT-->
<div class="mdl-card__supporting-text" style="padding: 0 4px 0 0;">

  <div class="m-search-inline" [hidden]="destination">
    <input type="text" [(ngModel)]="q" (keyup)="search()" placeholder="Search for a channel"/>
    <p class="m-helper">
       Select a channel above to have your post distributed to their subscribers in exchange for points.
    </p>

    <div class="m-search-inline-list mdl-shadow--2dp mdl-color--white" [hidden]="results.length == 0 || !searching">
      <div *ngFor="let user of results" (click)="selectDestination(user);" class="m-search-inline-item m-block">
        <div class="m-avatar">
          <img src="{{minds.cdn_url}}/icon/{{user.guid}}/small" class="mdl-shadow--2dp"/>
        </div>
        <div class="m-body">
          <h3>@{{user.username}}</h3>
          <span *ngIf="user.merchant" class="m-boost-pro-tag mdl-color--blue-grey-300">pro</span>
          <p class="m-subtitle">Views: {{user.impressions}} | Subscribers: {{user.subscribers_count}}</p>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="destination && !complete">

    <div class="mdl-grid minds-boost-container m-p2p-options" *ngIf="pro && !option">
      <div class="mdl-cell mdl-cell--6-col">
          <a class="minds-boost-button-selector mdl-color-text--blue-grey-500" (click)="option = 'points'">
              <h3>Points</h3>
              <span>Offer points to @{{destination.username}} in exchange for a remind</span>
          </a>
      </div>
      <div class="mdl-cell mdl-cell--6-col">
          <a class="minds-boost-button-selector mdl-color-text--blue-grey-500" (click)="option = 'pro'">
              <h3>Money</h3>
              <span>Offer money to @{{destination.username}} in exchange for a remind</span>
          </a>
      </div>
    </div>

    <div *ngIf="!pro || option == 'points'" class="mdl-grid minds-boost-points-wrapper">
      <div class="mdl-cell mdl-cell--8-col minds-boost-points-input">
        <div class="cell">
          <input
            type="number"
            min="0"
            placeholder="Enter here"
            [(ngModel)]= "bid"
            />
          </div>
          <div class="cell">
    				<label>Points</label>
    			</div>
      </div>
      <div class="mdl-cell mdl-cell--4-col minds-boost-points-input">
         <button class="mdl-button mdl-button--raised mdl-button--colored mdl-color--green" (click)="boost()" [hidden]="inProgress">Boost!</button>
      </div>

      <!-- Boost pro+ -->
      <div class="mdl-cell mdl-cell--12-col m-boost-pro-plus" [hidden]="stage == 3 || stage == 4" *ngIf="canPostToFacebook">
        <svg width="40" height="40" viewBox="-2 -2 32 32" [ngClass]="{'selected': postToFacebook}" (click)="postToFacebook = !postToFacebook">
          <path d="M17.9 14h-3v8H12v-8h-2v-2.9h2V8.7C12 6.8 13.1 5 16 5c1.2 0 2 .1 2 .1v3h-1.8c-1 0-1.2.5-1.2 1.3v1.8h3l-.1 2.8z"></path>
        </svg>
        <a target="_blank"
          href="https://www.facebook.com/{{destination.fb.uuid}}"
          class="mdl-color--white m-boost-pro-plus-fb"
          [ngClass]="{'not-selected': !postToFacebook}" >
          <img [src]="'https://graph.facebook.com/' + destination.fb.uuid + '/picture'" />
          <label class="mdl-color-text--blue-grey-300">{{destination.fb.name}}</label>
        </a>
        <div class="" *ngIf="postToFacebook">
          <m-scheduler (ts)="scheduledTs = ($event/1000)"></m-scheduler>
        </div>
      </div>
      <p class="mdl-color-text--grey-600 m-boost-pro-fb-message" *ngIf="postToFacebook">
        The message field will not be posted to facebook. Only the attachment will be sent.
      </p>

    </div>

    <div *ngIf="option == 'pro'" class="mdl-grid minds-boost-points-wrapper">

      <div class="mdl-cell mdl-cell--8-col minds-boost-points-input" [hidden]="stage == 3 || stage == 4">
        <div class="cell">
          <input
            type="number"
            min="0"
            placeholder="Enter here"
            [(ngModel)]= "bid"
            />
        </div>
        <div class="cell">
  				<label>$ USD</label>
  			</div>
      </div>

      <div class="mdl-cell mdl-cell--4-col minds-boost-points-input" [hidden]="stage != 1">
         <button class="mdl-button mdl-button--raised mdl-button--colored mdl-color--green" (click)="stage = 2" [hidden]="inProgress">Boost!</button>
      </div>

      <!-- Boost pro+ -->
      <div class="mdl-cell mdl-cell--12-col m-boost-pro-plus" [hidden]="stage == 3 || stage == 4" *ngIf="canPostToFacebook">
        <svg width="40" height="40" viewBox="-2 -2 32 32" [ngClass]="{'selected': postToFacebook}" (click)="postToFacebook = !postToFacebook">
          <path d="M17.9 14h-3v8H12v-8h-2v-2.9h2V8.7C12 6.8 13.1 5 16 5c1.2 0 2 .1 2 .1v3h-1.8c-1 0-1.2.5-1.2 1.3v1.8h3l-.1 2.8z"></path>
        </svg>
        <a target="_blank"
          href="https://www.facebook.com/{{destination.fb.uuid}}"
          class="mdl-color--white m-boost-pro-plus-fb"
          [ngClass]="{'not-selected': !postToFacebook}" >
          <img [src]="'https://graph.facebook.com/' + destination.fb.uuid + '/picture'" />
          <label class="mdl-color-text--blue-grey-300">{{destination.fb.name}}</label>
        </a>
        <div class="" *ngIf="postToFacebook">
          <m-scheduler (ts)="scheduledTs = ($event/1000)"></m-scheduler>
        </div>
      </div>
      <p class="mdl-color-text--grey-600 m-boost-pro-fb-message" *ngIf="postToFacebook">
        The message field will not be posted to facebook. Only the attachment will be sent
      </p>

      <minds-payments-stripe-checkout (inputed)="boost($event);" [hidden]="stage != 2"></minds-payments-stripe-checkout>
      <p class="m-checkout-hint mdl-color-text--blue-grey-300" [hidden]="stage != 2">
        You won't be charged until your boost is accepted by @{{destination.username}}
      </p>

      <div [hidden]="stage != 3" style="width:100%; text-align:center;">
        <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active" style="margin:auto; display:block;" [mdl]></div>
        <p>Please wait a moment...</p>
      </div>

      <div [hidden]="stage != 4">
        You boost has been submitted to @{{destination.username}}
      </div>

    </div>

  </div>

 </div>
