<div *ngIf="shouldShow()"
  class="mdl-card mdl-shadow--2dp"
>
  <div class="mdl-card__title">
    <h2 class="mdl-card__title-text">Wire</h2>

    <span *ngIf="session.getLoggedInUser().guid == channel.guid"
      class="m-wire-channel--edit-button"
      (click)="toggleEditing()"
    >
      <button class="material-icons" [hidden]="editing">edit</button>
      <button class="material-icons" [hidden]="!editing">done</button>
    </span>
  </div>

  <div class="mdl-card__supporting-text mdl-color-text--grey-600 m-wire-channel--rewards">
    <p *ngIf="!editing && rewards.description"
      class="m-wire-channel--description"
      [innerText]="rewards.description"
    ></p>

    <textarea *ngIf="editing"
      class="m-wire-channel--description-editor"
      [(ngModel)]="rewards.description"
      [autoGrow]
      placeholder="Describe what your supporters will getâ€¦"
    ></textarea>

    <div class="m-wire-channel--selector">
      <span>{{ getCurrentTypeLabel()?.label }}</span>

      <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="channel-wire-selector"
        [mdl]
      >
        <i class="material-icons">more_vert</i>
      </button>

      <ul
        class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
        for="channel-wire-selector"
        [mdl]
      >
        <li *ngFor="let typeLabel of typeLabels"
          class="mdl-menu__item"
          [hidden]="!shouldShow(typeLabel.type)"
          (click)="display = typeLabel.type"
        >{{ typeLabel.label }}</li>
      </ul>
    </div>

    <m-wire-channel-table type="points"
      *ngIf="shouldShow('points')"
      [(rewards)]="rewards.rewards.points"
      [hidden]="display != 'points'"
      [editing]="editing"
    ></m-wire-channel-table>

    <m-wire-channel-table type="money"
      *ngIf="shouldShow('money')"
      [(rewards)]="rewards.rewards.money"
      [hidden]="display != 'money'"
      [editing]="editing"
    ></m-wire-channel-table>
  </div>
</div>

<div class="m-wire-channel--call-to-action"
  *ngIf="session.getLoggedInUser().guid != channel.guid"
>
  <button class="mdl-color--green mdl-color-text--white mdl-shadow--8dp"
    (click)="sendWire()"
  >
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
      width="1em" height="1em" viewBox="100 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"
    >
      <path d="M302.7,64L143,288h95.8l-29.5,160L369,224h-95.8L302.7,64L302.7,64z"/>
    </svg>

    <span>Wire me</span>
  </button>
</div>
