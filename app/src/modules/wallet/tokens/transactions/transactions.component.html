<div class="m-token--ledger">
  <div class="m-token--ledger-filters m-border" *ngIf="!preview; else previewHeader">
    <m-date-selector label="From:" [date]="startDate" (dateChange)="onStartDateChange($event)" dateFormat="shortDate"></m-date-selector>
    <m-date-selector label="To:" [date]="endDate" (dateChange)="onEndDateChange($event)" dateFormat="shortDate"></m-date-selector>
  </div>
  <ng-template #previewHeader>
    <div class="m-token--ledger-filters m-token--ledger-filters--preview m-border">
      Last month
    </div>
  </ng-template>

  <div class="m-token--ledger--reward m-border" *ngFor="let transaction of transactions">
    <div class="m-token--ledger--reward-amount">
      <ng-container *ngIf="transaction.amount >= 0; else negativeRewardAmount">
        <span class="m-token--ledger--reward-amount--positive">
          + {{ +transaction.amount | token:18 | number }}
        </span>
      </ng-container>

      <ng-template #negativeRewardAmount>
        <span class="m-token--ledger--reward-amount--negative">
          - {{ -transaction.amount | token:18 | number }}
        </span>
      </ng-template>
    </div>

    <div class="m-token--ledger--reward-details">
      <div class="m-token--ledger--reward-details--meta">
        <span>{{ (transaction.contract.indexOf('offchain:') > -1 ? transaction.contract.substr(9) : transaction.contract)  | uppercase }}</span>
      </div>
      <div class="m-token--ledger--reward-details--meta">
        <span>{{ transaction.wallet_address }}</span>
      </div>

      <div class="mdl-layout-spacer"></div>

      <i class="material-icons">access_time</i>
      <p class="ts">{{ transaction.timestamp * 1000 | utcDate | date: 'mediumDate' }}</p>
    </div>
  </div>
</div>

<infinite-scroll
  distance="25%"
  (load)="load(false)"
  [moreData]="moreData"
  [inProgress]="inProgress">
</infinite-scroll>
